{% extends "base.html" %}
{% block content %}
<main class="home">
  {# ── Hero ─────────────────────────────────────────────── #}
  <section class="home-hero">
    <div class="container">
      <div class="home-hero__card">
        <div class="home-hero__copy">
          <h1 class="home-hero__title">A safe, sober place to live while you get back on your feet.</h1>
          <p class="home-hero__lead">Structured sober living for recovery &amp; reentry — with clear routines, accountability, and practical next steps.</p>
          <p class="home-hero__body">
            <strong>OVERCOMERS</strong> is peer-based supportive housing in the Grover Beach area.
            We focus on safety, respect, and stability. If someone needs detox, therapy, or medical care, we help connect them to licensed providers.
          </p>
          <div class="home-actions">
            <a class="btn btn--primary" href="{{ url_for('public.apply') }}">Apply</a>
            <a class="btn btn--ghost" href="{{ url_for('public.openings') }}">View openings</a>
            <a class="btn btn--ghost" href="{{ url_for('public.tour') }}">Schedule a tour</a>
          </div>
          <p class="muted small" style="margin-top:10px;">Emergency? Call 911. This site is informational and not medical advice.</p>
        </div>

        <div class="card card--padded card--stretch">
          <h2 class="section-title">Openings</h2>
          <p class="muted">See what's available. Apply first — we confirm fit and share pricing.</p>
          <div class="spacer"></div>
          <a class="btn btn--primary" href="{{ url_for('public.openings') }}">View openings</a>
        </div>

        <div class="card card--padded card--stretch">
          <h2 class="section-title">Resources</h2>
          <p class="muted">Family-friendly links for help, hotlines, and local support options.</p>
          <div class="spacer"></div>
          <a class="btn btn--primary" href="{{ url_for('public.resources') }}">Go to resources</a>
        </div>
      </div>
    </div>
  </section>

  {# ── How it works (process strip) ─────────────────────── #}
  <section class="section" style="padding:24px 0;">
    <div class="container">
      <div class="grid cards">
        <article class="card" style="grid-column: span 3;">
          <div class="card__body" style="text-align:center;">
            <div class="impact-icon" style="margin:0 auto 6px;">1</div>
            <h3 class="h3">Apply</h3>
            <p class="muted small">Quick form — takes 2 minutes.</p>
          </div>
        </article>
        <article class="card" style="grid-column: span 3;">
          <div class="card__body" style="text-align:center;">
            <div class="impact-icon" style="margin:0 auto 6px;">2</div>
            <h3 class="h3">Call / Screen</h3>
            <p class="muted small">We confirm fit and answer questions.</p>
          </div>
        </article>
        <article class="card" style="grid-column: span 3;">
          <div class="card__body" style="text-align:center;">
            <div class="impact-icon" style="margin:0 auto 6px;">3</div>
            <h3 class="h3">Tour</h3>
            <p class="muted small">See the space. Bring family or a case manager.</p>
          </div>
        </article>
        <article class="card" style="grid-column: span 3;">
          <div class="card__body" style="text-align:center;">
            <div class="impact-icon" style="margin:0 auto 6px;">4</div>
            <h3 class="h3">Move In</h3>
            <p class="muted small">Orientation, agreements, stability plan.</p>
          </div>
        </article>
      </div>
    </div>
  </section>

  {# ── What we offer ────────────────────────────────────── #}
  <section class="section">
    <div class="container">
      <div class="section-head">
        <div>
          <h2>What we offer</h2>
          <p class="muted">Meaningful support that helps people rebuild stability — one week at a time.</p>
        </div>
        <div class="actions">
          <a class="btn" href="{{ url_for('public.what_we_do') }}">What we do</a>
          <a class="btn btn--primary" href="{{ url_for('public.guide') }}">Start here</a>
        </div>
      </div>

      <div class="grid cards">
        <article class="card">
          <div class="card__body">
            <h3 class="h3">Structured sober housing</h3>
            <p class="muted">Clear rules, respectful living, accountability, and a calm environment designed for stability.</p>
            <p class="muted small">$1,000/month + $1,000 deposit (Grover Beach area)</p>
          </div>
        </article>
        <article class="card">
          <div class="card__body">
            <h3 class="h3">Life-skills workshops</h3>
            <p class="muted">Budgeting, job search, email/phones, routines, time management, and basic adulting skills.</p>
          </div>
        </article>
        <article class="card">
          <div class="card__body">
            <h3 class="h3">Reentry planning</h3>
            <p class="muted">Step-by-step help with schedules, paperwork, appointments, and getting back into the flow of life.</p>
          </div>
        </article>
        <article class="card">
          <div class="card__body">
            <h3 class="h3">Employment pathway</h3>
            <p class="muted">Job readiness support and opportunities through local partnerships — including Lumpia Bros Cafe.</p>
            <div class="actions" style="margin-top:10px;">
              <a class="btn" href="{{ url_for('public.careers') }}">Jobs near Grover Beach</a>
            </div>
          </div>
        </article>
        <article class="card">
          <div class="card__body">
            <h3 class="h3">Family &amp; youth support</h3>
            <p class="muted">Guidance for kids and families looking for safe next steps and local resources.</p>
            <div class="actions" style="margin-top:10px;">
              <a class="btn" href="{{ url_for('public.families') }}">For families</a>
            </div>
          </div>
        </article>
        <article class="card">
          <div class="card__body">
            <h3 class="h3">Veterans support</h3>
            <p class="muted">A stable, recovery-focused environment for veterans — plus help connecting to the right resources.</p>
            <div class="actions" style="margin-top:10px;">
              <a class="btn" href="{{ url_for('public.veterans') }}">Veterans info</a>
            </div>
          </div>
        </article>
      </div>
    </div>
  </section>

  {# ── Dynamic openings preview ─────────────────────────── #}
  {% if openings_preview and openings_preview|length > 0 %}
  <section class="section">
    <div class="container">
      <div class="section-head">
        <div>
          <h2>Current openings</h2>
          <p class="muted">Apply first. We'll confirm fit and share exact pricing.</p>
        </div>
        <div class="actions">
          <a class="btn" href="{{ url_for('public.openings') }}">See all</a>
        </div>
      </div>
      <div class="grid cards">
        {% for o in openings_preview %}
        <article class="card">
          <div class="card__body">
            <h3 class="h3">{{ o.title }}</h3>
            <p class="muted">
              {% if o.city %}{{ o.city }}{% endif %}{% if o.state %}{% if o.city %}, {% endif %}{{ o.state }}{% endif %}
              {% if o.available_on %} · Available {{ o.available_on.strftime('%b %d, %Y') }}{% endif %}
              · Beds: {{ o.beds_available }}
            </p>
            <div class="actions" style="margin-top:12px;">
              <a class="btn btn--primary" href="{{ url_for('public.opening_detail', slug=o.slug) }}">View</a>
              <a class="btn" href="{{ url_for('public.apply') }}">Apply</a>
            </div>
          </div>
        </article>
        {% endfor %}
      </div>
    </div>
  </section>
  {% endif %}

  {# ── Who we serve ─────────────────────────────────────── #}
  <section class="section">
    <div class="container">
      <div class="section-head">
        <div>
          <h2>Who we serve</h2>
          <p class="muted">Whether you're looking for housing, referring a client, or helping a loved one.</p>
        </div>
      </div>
      <div class="grid cards">
        <article class="card">
          <div class="card__body">
            <h3 class="h3">Individuals in recovery</h3>
            <p class="muted">Structured housing, peer support, and practical next steps for adults in recovery or reentry.</p>
            <div class="actions" style="margin-top:10px;">
              <a class="btn" href="{{ url_for('public.guide') }}">Guide</a>
            </div>
          </div>
        </article>
        <article class="card">
          <div class="card__body">
            <h3 class="h3">Veterans</h3>
            <p class="muted">Calm rebuilding, reentry help, and resource connections — tailored for service members.</p>
            <div class="actions" style="margin-top:10px;">
              <a class="btn" href="{{ url_for('public.veterans') }}">Veterans support</a>
            </div>
          </div>
        </article>
        <article class="card">
          <div class="card__body">
            <h3 class="h3">Families &amp; loved ones</h3>
            <p class="muted">Guidance on what to expect, how the process works, and support resources for your family.</p>
            <div class="actions" style="margin-top:10px;">
              <a class="btn" href="{{ url_for('public.families') }}">For families</a>
            </div>
          </div>
        </article>
        <article class="card">
          <div class="card__body">
            <h3 class="h3">Referral partners</h3>
            <p class="muted">Case managers, treatment centers, and community orgs — here's how to refer clients.</p>
            <div class="actions" style="margin-top:10px;">
              <a class="btn" href="{{ url_for('public.referrals') }}">For referrals</a>
            </div>
          </div>
        </article>
      </div>
    </div>
  </section>

  {# ── Page builder blocks (admin-managed) ───────────────── #}
  {% if page_blocks %}
  <section class="section">
    <div class="container">
      <div class="grid cards">
        {% for b in page_blocks %}
          <article class="card">
            <div class="card__body">
              <h3 class="h3">{{ b.content.title if b.content and b.content.title else b.id }}</h3>
              <p class="muted">{{ b.content.body if b.content and b.content.body else "" }}</p>
              {% if b.content and b.content.buttons %}
                <div class="actions" style="margin-top:12px;">
                  {% for btn in b.content.buttons %}
                    <a class="btn {% if loop.first %}btn--primary{% else %}btn--ghost{% endif %}" href="{{ btn.href }}">{{ btn.label }}</a>
                  {% endfor %}
                </div>
              {% endif %}
            </div>
          </article>
        {% endfor %}
      </div>
    </div>
  </section>
  {% endif %}
</main>
{% endblock %}
