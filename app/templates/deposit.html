
{% extends "base.html" %}
{% block content %}
<section class="section">
  <div class="container deposit-page">

    {# ── Hero banner ── #}
    <div class="deposit-hero fade-up">
      <p class="deposit-hero__eyebrow">Secure your spot</p>
      <h1 class="deposit-hero__title">Reserve Your Bed Today</h1>
      <p class="deposit-hero__lead">Pay your deposit online to lock in your spot. We'll contact you within 24 hours to schedule your move-in.</p>
      <div class="deposit-hero__amount">${{ "%.0f"|format(amount_dollars) }}</div>
    </div>

    {# ── Main form card ── #}
    <div class="card card--no-hover fade-up d1">
      <div class="card__body">

        {# Steps ── #}
        <div class="deposit-steps">
          <p class="deposit-steps__title">What happens next</p>
          <div class="deposit-step">
            <span class="deposit-step__num">1</span>
            <span class="deposit-step__text">Fill out your info below and pay securely via Stripe</span>
          </div>
          <div class="deposit-step">
            <span class="deposit-step__num">2</span>
            <span class="deposit-step__text">We call or text you within 24 hours to confirm details</span>
          </div>
          <div class="deposit-step">
            <span class="deposit-step__num">3</span>
            <span class="deposit-step__text">We schedule your move-in and send a welcome packet</span>
          </div>
        </div>

        {% if stripe_key %}
        <form method="post" action="{{ url_for('public.deposit_create_checkout') }}" class="deposit-form">
          <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

          <div class="field">
            <label class="label">Full name *</label>
            <input class="input" type="text" name="full_name" required placeholder="Your full name" autocomplete="name">
          </div>

          <div class="field">
            <label class="label">Email *</label>
            <input class="input" type="email" name="email" required placeholder="you@email.com" autocomplete="email">
          </div>

          <div class="field">
            <label class="label">Phone (so we can reach you fast)</label>
            <input class="input" type="tel" name="phone" placeholder="(805) 555-1234" autocomplete="tel">
          </div>

          <button class="btn btn--primary btn--lg btn--block" type="submit">
            Pay ${{ "%.0f"|format(amount_dollars) }} Deposit &mdash; Secure Checkout
          </button>

          <div class="deposit-secure">
            <p>Payments processed securely by <strong>Stripe</strong>. Your card info never touches our server.</p>
            <p>Questions? <a href="{{ url_for('public.contact') }}">Contact us</a> or call <a href="tel:+18052028473">(805) 202-8473</a>.</p>
          </div>
        </form>

        {% else %}
        <div class="deposit-offline">
          <p class="deposit-offline__title">Online deposits coming soon</p>
          <p class="deposit-offline__desc">In the meantime, call or text us to arrange your deposit.</p>
          <div class="actions" style="justify-content:center;">
            <a class="btn btn--primary" href="tel:+18052028473">Call (805) 202-8473</a>
            <a class="btn" href="mailto:support@overcomersrc.com">Email Us</a>
          </div>
        </div>
        {% endif %}
      </div>
    </div>

    {# ── FAQ card ── #}
    <div class="card card--no-hover fade-up d2" style="margin-top:16px;">
      <div class="card__body deposit-faq">
        <h3 class="h3" style="margin-bottom:4px;">Frequently asked</h3>

        <details>
          <summary>Is the deposit refundable?</summary>
          <p class="answer">Yes. If we determine it's not a good fit during the confirmation call, or if you cancel before move-in, your deposit is fully refunded.</p>
        </details>

        <details>
          <summary>What does the deposit cover?</summary>
          <p class="answer">The deposit secures your bed and is applied toward your first month. It shows commitment and helps us hold the spot for you.</p>
        </details>

        <details>
          <summary>Do I need to apply first?</summary>
          <p class="answer">Not necessarily. If you already toured or spoke with us, you can go straight to deposit. If not, we'll do a quick phone screening after payment.</p>
        </details>

        <details>
          <summary>Can I pay in person instead?</summary>
          <p class="answer">Yes &mdash; call <a href="tel:+18052028473" style="color:var(--brand);font-weight:600;">(805) 202-8473</a> and we'll arrange it.</p>
        </details>
      </div>
    </div>

  </div>
</section>
{% endblock %}
